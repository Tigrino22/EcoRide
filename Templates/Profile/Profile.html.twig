
{% extends '@__main__/base.html.twig' %}

{% block body %}
    <div class="flex flex-col-reverse md:flex-row border-b justify-between items-center pb-4 gap-6">
        <div class="flex flex-col gap-6 mb-4">
            <h1 class="text-5xl font-extrabold">Profile de {{ session('user').username }}</h1>
            <p class="text-xl">{{ session('user').email }}</p>
        </div>
        {# Voir pour intégrer la photo dinamiquement #}
        <img class="w-48 h-48 rounded-full" src="https://placehold.co/400" alt="User dropdown">
    </div>

    <form method="POST" action="{{ path('profile.update', { 'id' : session('user').id }) }}">
        {{ csrf_token('update_profile')|raw }}
        {# Forumulaire de profile #}
        <div class="flex flex-col my-4">
            <div class="flex flex-col gap-2 mb-4">
                <label for="name">
                    Nom :
                </label>
                <input
                        class="rounded-md shadow-md border-2 border-teal-400 focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                        id="name" name="name" type="text" value="{{ session('user').name }}">
            </div>
            <div class="flex flex-col gap-2 mb-4">
                <label for="firstname">
                    Prénom :
                </label>
                <input
                        class="rounded-md shadow-md border-2 border-teal-400 focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                        id="firstname" name="firstname" type="text" value="{{ session('user').firstname }}">
            </div>
            <div class="flex flex-col gap-2 mb-4">
                <label for="email">
                    Email :
                </label>
                <input
                        class="rounded-md shadow-md border-2 border-teal-400 focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                        id="email" name="email" type="email" value="{{ session('user').email }}">
            </div>
            <div class="flex flex-col gap-2 mb-4">
                <label for="phone">
                    Téléphone :
                </label>
                <input
                        class="rounded-md shadow-md border-2 border-teal-400 focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                        id="phone" name="phone" type="tel"
                        value="{{ session('user').phone }}">
            </div>
            <div class="flex flex-col gap-2 mb-4">
                <label for="address">
                    Adresse :
                </label>
                <input
                        class="rounded-md shadow-md border-2 border-teal-400 focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                        id="address" name="address" type="text"
                        value="{{ session('user').address }}">
            </div>

            <div class="flex flex-col gap-2 mb-4">
                <label for="postal_code">
                    Code postale :
                </label>
                <input
                        class="rounded-md shadow-md border-2 border-teal-400 focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                        id="postal_code" name="postal_code" type="number"
                        value="{{ session('user').postalCode }}">
            </div>

            <div class="flex flex-col gap-2 mb-4">
                <label for="city">
                    Ville :
                </label>
                <input
                        class="rounded-md shadow-md border-2 border-teal-400 focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                        id="city" name="city" type="text"
                        value="{{ session('user').city }}">
            </div>

            <div class="flex flex-col gap-2 mb-4">
                <label for="birthday">
                    Date de naissance :
                </label>
                <input
                        class="rounded-md shadow-md border-2 border-teal-400 focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                        id="birthday" name="birthday" type="date"
                        value="{{ session('user').birthday }}">
            </div>
        </div>

        {# Toggles buttons de Passager/Chauffeur #}
        <div class="flex flex-col gap-2 w-36 my-6">

            <label class="inline-flex items-center cursor-pointer justify-between">
                <input type="hidden" name="is_passenger" value="0">
                <input id="js_toggle_passenger" type="checkbox" value="1" class="sr-only peer" {% if session('user').isPassenger %}checked{% endif %} name="is_passenger">
                <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300">Passager</span>
                <div class="relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-teal-300 dark:peer-focus:ring-teal-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-teal-600"></div>
            </label>

            <label class="inline-flex items-center cursor-pointer justify-between">
                <input type="hidden" name="is_driver" value="0">
                <input id="js_toggle_driver" type="checkbox" value="1" class="sr-only peer" {% if session('user').isDriver %}checked{% endif %} name="is_driver">
                <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300">Chauffeur</span>
                <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 dark:peer-focus:ring-teal-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-teal-600"></div>
            </label>

        </div>

        {# Parametres accessible que pour le chauffeur, Vérification nécessaire coté back
            si input "chauffeur" isChecked #}
        <div id="chauffeur_dropdown" class="flex-col gap-2 border-t-2 {% if not session('user').isDriver %}hidden opacity-0 scale-y-0{% endif %} duration-300 transition-all ease-in-out">
            <div class="flex flex-col my-4">
                <h2 class="text-lg font-semibold mb-4">Gérer les véhicules</h2>

                <!-- Bouton pour ajouter un véhicule -->
                <div class="flex justify-start mb-4">
                    <a href="{{ path('car.insert') }}"
                       class="bg-gradient-to-tl from-teal-300 to-cyan-600 text-white px-4 py-2 rounded-md shadow-md hover:bg-gradient-to-tl hover:from-teal-500 hover:to-cyan-800">
                        Ajouter un véhicule
                    </a>
                </div>

                <!-- Bouton pour afficher la liste des véhicules -->
                <div class="flex justify-start">
                    <a href="{{ path('car.show') }}"
                       class="bg-gradient-to-tl from-teal-300 to-cyan-600 text-white px-4 py-2 rounded-md shadow-md hover:bg-gradient-to-tl hover:from-teal-500 hover:to-cyan-800">
                        Voir la liste des véhicules
                    </a>
                </div>
            </div>
        </div>


        <div class="flex justify-end">
            <button type="submit" class="
                inline-flex justify-center items-center
                gap-2 px-6 py-2 text-md font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-teal-500 rounded-md hover:bg-teal-600 focus:bg-teal-600 focus:outline-none sm:mx-2
            ">Enregistrer</button>
        </div>
    </form>

{% endblock %}

